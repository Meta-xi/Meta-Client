import{a as A}from"./chunk-LGOV7ZTY.js";import{a as M,c as S,g as _,i as E,m as W}from"./chunk-A3R2OZES.js";import{a as T}from"./chunk-VBQHL3HI.js";import{a as F}from"./chunk-HTONRPL5.js";import"./chunk-I6QIW7BD.js";import"./chunk-WXI33M2S.js";import{a as v}from"./chunk-GP7BZZWX.js";import{Bb as p,Cb as h,Db as g,Fb as C,Ka as l,La as u,Z as x,d as m,jb as n,kb as t,lb as y,qb as b,r as w,xb as a,zb as c}from"./chunk-HLI2SXL3.js";var q=(()=>{let s=class s{constructor(r,i,e){this.http=r,this.notification=i,this.telegram=e,this.balance="0.00",this.username=localStorage.getItem("username")||"",this.amount=null,this.accountNumber="",this.password="",this.withdrawalFee=0,this.AmountToReceive=0}ngOnInit(){this.GetBalance()}GetBalance(){return m(this,null,function*(){let r="http://localhost:5071/api/Wallet/GetBalance/"+this.username;try{let i=yield w(this.http.get(r));console.log(i),this.balance=i}catch(i){let e=i.error.message;console.log(e)}})}CalculateFees(){this.amount&&this.amount>=2e4&&this.amount<=1e7?(this.withdrawalFee=this.amount*.06,this.AmountToReceive=this.amount-this.withdrawalFee):(this.withdrawalFee=0,this.AmountToReceive=0)}RequestWithdrawal(){return m(this,null,function*(){if(yield this.VerifyPassword()){let i=`Withdrawal request:

Username: ${this.username}
Account: ${this.accountNumber}
Amount: ${this.amount}
Fee: ${this.withdrawalFee}
AmoutToReceive: ${this.AmountToReceive}`;this.telegram.sendMessageToChannel(i),this.notification.correct("Solicitud de retiro enviada correctamente")}})}VerifyPassword(){return m(this,null,function*(){let r="https://meta-api-production-3abd.up.railway.app/api/User/VerifyPassword",i={username:this.username,password:this.password};try{let e=yield w(this.http.post(r,i));return console.log(e),!0}catch(e){let d=e.error.message;return this.notification.errorMessage(d),!1}})}};s.\u0275fac=function(i){return new(i||s)(u(v),u(F),u(A))},s.\u0275cmp=x({type:s,selectors:[["app-withdraw"]],standalone:!0,features:[C],decls:37,vars:6,consts:[[1,"w-full","gap-4","flex","flex-col","items-center","px-8","py-4","bg-blue-950","rounded-xl","pb-20"],[1,"w-full","flex","justify-between","items-center"],[1,"font-medium"],[1,"text-xs","text-red-400"],["src","assets/token/nequi.png","alt","nequi",1,"w-8","rounded-full"],[1,"w-full","flex","flex-col","items-start","justify-center","bg-[#0D254B]","p-5","rounded-lg"],[1,"text-base"],[1,"text-2xl","font-semibold"],[1,"w-full","flex","items-start","justify-start","gap-1"],[1,"bg-[#301E67]","py-2","px-4","rounded-lg"],["type","number","placeholder","Monto 20.000 - 10,000.000",1,"w-full","p-3","text-black","rounded-lg",3,"ngModelChange","input","ngModel"],["placeholder","N\xFAmero de cuenta",1,"w-full","p-3","text-black","rounded-lg",3,"ngModelChange","ngModel"],["placeholder","Contrase\xF1a","type","password",1,"w-full","p-3","text-black","rounded-lg",3,"ngModelChange","ngModel"],[1,"w-full","flex","items-center","justify-between"],[1,"text-sm","text-gray-500"],[1,"text-right","text-sm"],[1,""],[1,"text-sm"],[1,"bg-[#301E67]","w-full","rounded-lg","py-4","shadow-2xl","font-bold",3,"click"]],template:function(i,e){i&1&&(y(0,"app-back-home"),n(1,"section",0)(2,"div",1)(3,"article")(4,"h4",2),a(5,"Tiempo de retiro"),t(),n(6,"p",3),a(7,"retiro 24 horas"),t()(),y(8,"img",4),t(),n(9,"div",5)(10,"p",6),a(11,"Balance total"),t(),n(12,"p",6)(13,"span",7),a(14),t(),a(15,"COP"),t()(),n(16,"div",8)(17,"p"),a(18,"M\xE9todo de retiro: "),t(),n(19,"button",9),a(20,"NEQUI "),t()(),n(21,"input",10),g("ngModelChange",function(o){return h(e.amount,o)||(e.amount=o),o}),b("input",function(){return e.CalculateFees()}),t(),n(22,"textarea",11),g("ngModelChange",function(o){return h(e.accountNumber,o)||(e.accountNumber=o),o}),t(),n(23,"input",12),g("ngModelChange",function(o){return h(e.password,o)||(e.password=o),o}),t(),n(24,"div",13)(25,"span",14),a(26,"Comisi\xF3n de retiro"),t(),n(27,"div",15)(28,"div",16),a(29),t()()(),n(30,"div",13)(31,"span",14),a(32,"Cantidad a recibir"),t(),n(33,"div",17),a(34),t()(),n(35,"button",18),b("click",function(){return e.RequestWithdrawal()}),a(36,"Confirmar"),t()()),i&2&&(l(14),c("",e.balance," "),l(7),p("ngModel",e.amount),l(),p("ngModel",e.accountNumber),l(),p("ngModel",e.password),l(6),c("",e.withdrawalFee||0,"COP"),l(5),c("",e.AmountToReceive||0," COP"))},dependencies:[T,W,M,E,S,_]});let f=s;return f})();export{q as WithdrawComponent};
